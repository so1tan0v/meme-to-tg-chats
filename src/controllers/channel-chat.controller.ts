import TelegramBot from 'node-telegram-bot-api';import { startCommand } from '../commands/start.command';import { downloadCommand } from '../commands/download.command';import { lastUpdateCommand } from '../commands/last-update.command';import { updatesCommand } from '../commands/updates.command';import {    ADDED_TO_CHANNELS,    ALL_COMMANDS,    ALL_UPDATE_COMMAND,    LAST_UPDATES_COMMAND,    REG_USERS,    START_COMMAND,} from '../config/config';import { ChannelService } from '../services/channel.service';import { bot } from '../bot';import { allCommandsCommand } from '../commands/all-commands.command';import { regUsersCommand } from '../commands/reg-users.command';import { addedToChannelsCommand } from '../commands/added-to-channels.command';export async function channelChatController(msg: TelegramBot.Message) {    const text = msg.text;    const chatId = msg?.chat?.id;    if (!chatId) return;    const channel = await ChannelService.getByChatId(chatId);    if (!channel) {        await ChannelService.create({            chatId,            roomName: msg.chat.title ?? 'Неопеределено',        });    }    const firstPrefix = text?.split('@')[0];    try {        switch (firstPrefix) {            case START_COMMAND:                await startCommand(chatId);                return;            case LAST_UPDATES_COMMAND:                await lastUpdateCommand(chatId);                return;            case ALL_UPDATE_COMMAND:                await updatesCommand(chatId);                return;            case ALL_COMMANDS:                await allCommandsCommand(msg);                return;            case REG_USERS:                await regUsersCommand(msg);                return;            case ADDED_TO_CHANNELS:                await addedToChannelsCommand(msg);                return;            default:                await downloadCommand(msg);                return;        }    } catch (e) {        console.error(e);        return bot.sendMessage(chatId, 'Произошел отвал, пиши @so1tan0v: \n\n' + JSON.stringify(e));    }}