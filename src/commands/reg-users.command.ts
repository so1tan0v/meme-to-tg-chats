import TelegramBot from 'node-telegram-bot-api';import { bot } from '../bot';import { UsersService } from '../services/users.service';import { isAdmin } from '../utils/helper';export async function regUsersCommand(msg: TelegramBot.Message) {    const chatId = msg?.chat?.id;    if (msg.from?.username && isAdmin(msg.from.username)) {        const allUsers = await UsersService.getAllUsers();        const users = allUsers.map((item) => {            return `<b>Пользователь:</b> ${item.username ?? ''} <b>Фамилия:</b> ${item.lastName ?? ''} <b>Имя:</b> ${item.firstName ?? ''} <b>id чата:</b> ${item.chatId ?? ''} `;        });        const header = `<b><i>Пользователи</i></b>:\n\n`;        const footer = `\n\n<b><i>Количество:</i></b> ${users.length}`;        const message = `${header}${users.join('\n')}${footer}`;        const chunkSize = 4096 - 100; // 4096 символов минус небольшой буфер для заголовков и разметки        const sendMessageInChunks = async (text: string) => {            while (text.length > 0) {                const chunk = text.slice(0, chunkSize);                text = text.slice(chunkSize);                await bot.sendMessage(chatId, chunk, { parse_mode: 'HTML' });            }        };        if (message.length > 4096) {            await sendMessageInChunks(message);        } else {            await bot.sendMessage(chatId, message, { parse_mode: 'HTML' });        }    } else {        await bot.sendMessage(chatId, 'Эта команда не для вас.');    }}